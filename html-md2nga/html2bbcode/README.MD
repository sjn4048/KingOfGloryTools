### 简介

在成立初期，这是一个**场景驱动**的项目，用于王者荣耀官方公告的自动搬运。它基于Pypi项目html2bbcode进行修改，在原项目的基础上支持了王者荣耀官方公告html中的一系列常见元素，如内嵌在HTML中的css代码等。

### 原理

我们认为基于正则表达式的<u>**替换**</u>有其局限性，因此使用了Python内建的HTMLParser进行**<u>解析</u>**（请注意二者的区别）。对于简单的标签，如`<strong>-><b>`我们直接进行替换；而对于类似于`<span style="">`的内嵌CSS，我们则进行了更深程度的分析。

此外，由于NGA论坛代码存在若干bug（或者说，不是标准的BBCode），因此对于一些两者标准不同的地方，我们统一修改为NGA代码格式。

### 已完成功能

*注：标有下划线的功能与其他模块深度耦合，因此无法开源。*

- 架构修改
  - 重构了修改器架构，支持了`<span style="">`的内嵌CSS格式。
- 字体大小
  - 通过HTML内容自动判断“标准”文字大小，进而支持NGA以百分比缩放的字体渲染模式。
  - 自动忽略等于标准大小的tag，避开NGA渲染器在多个重复size标签时的bug
- 标题标签(<h*>)
  - 由于NGA不支持h1, h2，因此自动适配标题标签，并转换为NGA样式
- <u>外链图片</u>
  - 将符合NGA上传尺寸限制的图片提取、上传到NGA服务器，并替换所有源链接，避免手机端手动加载。
- 文字颜色
  - 适配NGA的颜色系统
  - 当NGA的颜色系统没有特定RGB颜色时，通过RGB空间欧几里得距离自动找出最接近的颜色替换。
- 其他
  - 自动删除不必要的空标签，避开NGA渲染器的bug
  - 自动替换\xa0全角空格，避开NGA渲染器的bug
  - 将NGA格式中不符合BBCode规范的标签（如[list]等）进行针对性适配并保存至新配置文件。